<!doctype HTML>
<meta charset = 'utf-8'>
<html>
  <head>
    <link rel='stylesheet' href='css/style.css'>
    <script src='js/jquery-1.8.2.min.js' type='text/javascript'></script>
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src='js/zoomable_treemap_reusable.js' type='text/javascript'></script>
    
    <style>
    </style>
    
  </head>
  <body>
    <div id="chart">
    </div>
<script>
var color;
d3.csv('../parallelsets/titanic_agg.csv', function(error, dat){
// this will be chained in rCharts 'getPayload'
    root = {"key": "titanic", "values": d3.nest()
                          .key(function(d) { return d.class; })
                          .key(function(d) {return d.age;})
                          .key(function(d) {return d.sex;})
                          .key(function(d) { return d['status']})
                          .entries(dat)};
    function drawchart(){
        var params = {id: "chart", root: root}
        var zoomable = d3.zoomable_treemap()
                        .id(params.id)
        
        d3.select("#" + params.id)
            .datum(params.root)
            .call(zoomable)

        return zoomable;
    };

    $(document).ready(function(){
        drawchart()
    });
});

</script>
</body>
</html>